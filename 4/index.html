<!DOCTYPE html>
<html>
<head>
<title>JS start</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js" integrity="sha256-u6BamZiW5tCemje2nrteKC2KoLIKX9lKPSpvCkOhamw=" crossorigin="anonymous"></script>
<script>

function createtoken() {
    var qstr = window.location.hash.substring(1);
    var hash = CryptoJS.HmacSHA512(qstr, "");
    var rehash = CryptoJS.HmacSHA512(hash, "");
    var i;
    for (i = 0; i < 2345; i++) {
        rehash = CryptoJS.HmacSHA512(rehash, "this-server-is-ndls.it-created-2018-05-12");
    }
    var hashInBase64 = CryptoJS.enc.Base64.stringify(rehash);
    window.location.replace("./loop?token=" + hashInBase64 + "&loop=" + i + "#" + qstr);
}
</script>
</head>
<body onload="javascript:createtoken()">
</body>
</html>
